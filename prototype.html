<!DOCTYPE HTML>
<html lang="en">
<head>
		<meta charset="UTF-8">

		<link rel="stylesheet" href="styles.css" type="text/css">
		<link rel="stylesheet" href="css/jslider.css" type="text/css">
		<link rel="stylesheet" href="css/jslider.blue.css" type="text/css">
		<link rel="stylesheet" href="css/jslider.plastic.css" type="text/css">
		<link rel="stylesheet" href="css/jslider.round.css" type="text/css">
		<link rel="stylesheet" href="css/jslider.round.plastic.css" type="text/css">

		<script src="d3.min.js"></script>
		<script src="d3.js"></script>
		<script src="jquery-1.12.4.min.js"></script>


		<script type="text/javascript" src="js/jshashtable-2.1_src.js"></script>
		<script type="text/javascript" src="js/jquery.numberformatter-1.2.3.js"></script>
		<script type="text/javascript" src="js/tmpl.js"></script>
		<script type="text/javascript" src="js/jquery.dependClass-0.1.js"></script>
		<script type="text/javascript" src="js/draggable-0.1.js"></script>
		<script type="text/javascript" src="js/jquery.slider.js"></script>
		<script type="text/javascript" src="slider.js"></script>
		<script type="text/javascript" src="colorKey.js"></script>
	    <script type="text/javascript" src="functionCleaner.js"></script>
		<script type="text/javascript" src="SliderHideFunction.js"></script>



		<title>Prototype Music Analysis </title>

		<style>
		.slider {
		    padding: 40px 0px;
			display: inline-block;
			width: 400px;
		}
		.colors span {
			width: 50px;
			height: 50px;
			display: inline-block;
		}

		</style>


</head>
<body>
<div name="header-wraper" style="width:100%;">
<div name="header" style="width: 50%;  margin: 0 auto;">
	<p style="text-align: center" >MUSIC ANALYSIS</p>
	<br>
	
<div id="jahr" style="align: center">
	<p style="text-align: center" >Please select the range of years that should be analized</p>
	<p style="text-align: center" ><strong>Jahr:</strong></p>
	<div class="slider" style="margin-left: 20%;" >
		<input type="slider" name="year" value="1990;2016" />
	</span>
</div>
</div>	
</div>
	<div class=canvas> </div>

	<script>

	//ideas de otras visualizacion
	//hacer una busqueda por teclado de un genero especifico y mostrarlo
	//beliebheit einem genre durch ein jahr
	//popularity of artist

	//para la proxima para la exposicion mostrar una visuaizacion en particular y luego de eso
	//explicar que se puede ver y que se puede entender de la visualizacion

	// to do
	// for para pegar los circulos fuera, se va a hacer un string que va a ser guardado en una variable
	//	y esa variable va a correr en el for de afuera, esa variable va a tener el comando de hacer el
	// att y todo lo demas.
	// esa estring la va a ir haciendo los selects que se usen.
	// etiqueten von values in die achsen schreiben

	//conseguir subir info desde un csv
	//hacer la informacion de spotify
	//cambiar los colores de key

	//hier komm die spotify data retrieving , zur zeit einfach eine selbst gebastete csv

	//		Artist,title,genre,loudness (from -60 db to 0),energy (from 0.0 to 1.0),key (0 = C / 1 = C_/D_ / 2 = D and so on),tempo,Jahr,danceability,duration  (in milliseconds),playcount,hotness\n\
	var music="Artist,title,genre,loudness,energy,key,tempo,Jahr,danceability,duration,playcount,hotness\n\
	s-man,dangerous thoughts,dance,-12.733,0.626,3,121.000,2014,0.0808,535223,14,0.5183\n\
	pitbull,el taxi,latinParty,-10.249,0.823,2,101.000,2015,0.1232,539182,21,0.2129\n\
	bontan,firefly,dance,-7.134,0.923,8,95.000,1999,0.9213,497493,9,0.4382\n\
	Kieser.Velten,Bossa Jam,Lounge / Nu Jazz / House,-10.231,0.2129,12,120.000,2004,0.7543,728371,2,0.8847\n\
	The Fugees,Ready Or Not (Lucas Chambon remix),house,-7.242,0.4382,4,124.000,2115,0.9232,832373,2,0.8372\n\
	The Notorious B.I.G.,Mo Money Mo Problems (Naxsy Extended Remix),House,-6.234,0.8847,1,100.000,2010,0.6219,432393,3,0.5921\n\
	soul ii soul,back to life (follow me remix),deepHouse,-12.123,0.8372,6,124.000,2015,0.4932,438293,2,0.9287\n\
	Osunlade,Break It Down,Dance,-5.123,0.5921,5,145.000,2015,0.2234,455432,1,0.7328\n\
	Jamie Woon,Night Air (Original Mix),deepHouse,-6.634,0.9287,8,92.000,2012,0.8523,543726,8,0.2948\n\
	Mario,Let Me Love You (Sllash Remix),deepHouse,-8.245,0.8847,0,90.000,2012,0.8221,548273,3,0.1938\n\
	Ace of Base,Cruel summer (YoGee house Remix 2014),Deep House,-9.234,0.9273,3,87.000,2016,0.9134,593772,1,0.0479\n\
	Justin Timberlake,My Love (Lucas Chambon Remix),house,-7.034,0.7474,2,94.000,2013,0.7283,682736,2,0.0736\n\
	e. avitabile,soul express (remix soul deep v.pisany),house,-9.034,0.7231,2,97.000,2011,0.9277,527763,2,0.7231\n\
	daft punk,giorgio by moroder,house,-10.234,0.8272,1,100.000,2015,0.5183,578781,2,0.6219\n\
	zhu,Superfriends,deepHouse,-12.745,0.9476,8,99.000,2015,0.2129,548299,3,0.4932\n\
	zhu,Stolen Dance (Fear of Dawn Edit),Deep House,-12.489,0.9273,7,103.000,2009,0.4382,498728,1,0.9273\n\
	Duke Dumont,Ocean Drive,deepHouse,-11.153,0.7474,5,105.000,2007,0.8847,563847,3,0.7474\n\
	The 2 Bears,Not This Time (Original Mix),House,-10.745,0.7429,4,105.000,2009,0.8372,546729,5,0.7429\n\
	Karmon,No Illusion (Original Mix),deepHouse,-10.123,0.8223,8,150.000,2007,0.5921,627367,2,0.8223\n\
	vance joy,riptide (flicflac remix),deepHouse,-8.138,0.5318,9,87.000,2003,0.9287,656563,3,0.5318\n\
	Adrian Lux,Teenage Crime (Thomas Jack Remix),TropicalHouse,-7.673,0.8472,12,89.000,2005,0.7328,654323,2,0.8472\n\
	Tamer Akgul,Back in Town,Electronic,-9.234,0.7283,11,125.000,1997,0.2948,564372,3,0.6219\n\
	ornette,crazy (noze remix extended club version),deepHouse,-10.345,0.9277,1,130.000,1990,0.1938,5283494,2,0.4382\n\
	hot natured feautring anabel englund,reverse skydiving,deepHouse,-7.643,0.5183,1,130.000,2013,0.0479,562372,4,0.8523\n\
	James Dexter,Forward (Original Mix),deepHouse,-12.647,0.2129,11,123.000,2011,0.0736,512638,3,0.9277\n\
	The Avener,Fade Out Lines (Original Mix),Deep House,-12.593,0.4382,12,122.000,2016,0.7231,299865,1,0.5183\n\
	George Michael,Careless Whisper (Armando Junior Soulful Mix),Deep House,-12.856,0.8523,6,115.000,2014,0.8272,2937476,1,0.2129\n\
	99 souls ft destinyâ€™s child & brandy,the girl is mine,house,-6.176,0.8221,5,115.000,2010,0.9476,277382,3,0.4382\n\
	France Joli,Gonna Get Over You,Electro/Disco,-9.745,0.9134,7,124.000,2012,0.9273,162382,2,0.8847\n\
	Adele,Skyfall (Montmartre Remix),deepHouse,-9.673,0.9213,8,110.000,2012,0.7474,172635,4,0.8372\n\
	marlon roudette ft stewart,everybody feeling something,house,-10.547,0.7543,9,107.000,2014,0.7429,362830,3,0.4932\n\
	Nina Kraviz,Iâ€™m Week (Original Mix),deepHouse,-6.572,0.4932,8,96.000,2016,0.8472,10273645,2,0.8472";




		//here we will make the canvas where we will put the circles
		var container = d3.select(".canvas").append("svg").attr("width",1300).attr("height",550).attr("class","svgCanvas");

//	canvas left
		var axeX = container.append("line").attr("x1",100).attr("y1",500).attr("x2",600).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
 		var xSpike = container.append("polygon").attr("points","100,0 95,20 105,20").style("fill","red").style("stroke","red").style("stroke-width",2);

		var axeY = container.append("line").attr("x1",100).attr("y1",0).attr("x2",100).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
		var ySpike = container.append("polygon").attr("points","600,500 580,495 580,505	").style("fill","red").style("stroke","red").style("stroke-width",2);

		var separationLineX = container.append("line").attr("x1",350).attr("y1",20).attr("x2",350).attr("y2",480).attr("stroke","black").attr("stroke-width",1);
		var separationLineY = container.append("line").attr("x1",120).attr("y1",250).attr("x2",580).attr("y2",250).attr("stroke","black").attr("stroke-width",1);

//	canvas right		
		var axeX = container.append("line").attr("x1",650).attr("y1",500).attr("x2",1250).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
 		var xSpike = container.append("polygon").attr("points","1250,500 1230,495 1230,505").style("fill","red").style("stroke","red").style("stroke-width",2);

		var axeY = container.append("line").attr("x1",650).attr("y1",0).attr("x2",650).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
		var ySpike = container.append("polygon").attr("points","650,0 645,20 655,20	").style("fill","red").style("stroke","red").style("stroke-width",2);

		var separationLineX = container.append("line").attr("x1",950).attr("y1",20).attr("x2",950).attr("y2",480).attr("stroke","black").attr("stroke-width",1);
		var separationLineY = container.append("line").attr("x1",720).attr("y1",250).attr("x2",1180).attr("y2",250).attr("stroke","black").attr("stroke-width",1);
//	end of canvas
		
		
		function parseCSV(music){
			  var lines = music.split("\n"); //split the csv in rows
			  var metadata = lines[0].split(","); //first row of the csv file that contains the name of the metadata that we are using
			  var rows = lines.slice(1); // Data without metadata tags
			  var data= rows.map(function(row){//we prepair the object to be send
			      var entries = row.split(",");
			      var rowObject={};
			      var i=0;
			      metadata.forEach(function(metadata,i ){
			          //   console.log(metadata[i]);
			          rowObject[metadata] = entries[i];
			          i++;
			      });
			     return rowObject;
			  });
			  return data;
	}



	//var parsedCSV = parseCSV(music);
	var parsedCSV = d3.csv.parse(music,function(rowObject){
		rowObject["loudness"] = parseFloat(rowObject["loudness"]);
		rowObject["energy"] = parseFloat(rowObject["energy"]);
		rowObject["key"] = parseFloat(rowObject["key"]);
		rowObject["tempo"] = parseFloat(rowObject["tempo"]);
		rowObject["Jahr"] = parseFloat(rowObject["Jahr"]);
		rowObject["danceability"] = parseFloat(rowObject["danceability"]);
		rowObject["duration"] = parseFloat(rowObject["duration"]);
		rowObject["playcount"] = parseFloat(rowObject["playcount"]);
		rowObject["hotness"] = parseFloat(rowObject["hotness"]);
		return rowObject;
	});

	console.log(parsedCSV);

//	var counter = parsedCSV.length;

	var xAchseOption;
	var xAchse;
	var xAchseArray=[];

	var yAchseOption;
	var yAchse;
	var yAchseArray=[];

	var tempoArray=[];


	var kreisGrosseOption;
	var kreisGrosse;
	var kreisGrosseValue;

	var sliderLinks ;
	var sliderRechts;

	cleaner();

$(document).ready(function(){

	//so bald man betätigt den Buttton von Slider, "range" uebernimmt  die neue ausgewählte Grenze
	//wert wird gespeichert in range im Form 0.3;0.8
$(".slider").click(function(){
	var a=$(this).find('input[type="slider"]');
	var range = a.val();
	var array = range.split(';');
     sliderLinks =array[0];
	 sliderRechts = array[1];
	console.log("wert 1: " + sliderLinks);

	console.log("wert 2: " + sliderRechts);

	});

// 	 	function cleaner(){
// 		var cleaner = container.append("rect").attr("x",100).attr("y",0).attr("width",500).attr("height",500).attr("fill","white");
// 		var axeX = container.append("line").attr("x1",100).attr("y1",500).attr("x2",600).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
// 		var xSpike = container.append("polygon").attr("points","100,0 95,20 105,20").style("fill","red").style("stroke","red").style("stroke-width",2);
// 		var axeY = container.append("line").attr("x1",100).attr("y1",0).attr("x2",100).attr("y2",500).attr("stroke","red").attr("stroke-width",2);
// 		var xSpike = container.append("polygon").attr("points","600,500 580,495 580,505	").style("fill","red").style("stroke","red").style("stroke-width",2);
// 			return ;
// 		}

//sejchas=====================================================================================================
//die ausgewahlte Tags werden bei anderen Selectboxes ausgeblendet

$('#xAchse1').change(function(){
		$("#yAchse option").show();
		$("#kreisGrosseSelect option").show();
	    $("#colorFilter option").show();


		$("#yAchse option[value="+$(this).val()+"]").hide();
		//$("#kreisGrosseSelect option[value="+$(this).val()+"]").hide();
		//$("#colorFilter option[value="+$(this).val()+"]").hide();

		});

$('#yAchse1').change(function(){
		$("#xAchse option").show();
		//$("#kreisGrosseSelect option").show();
		//$("#colorFilter option").show();


		$("#xAchse option[value="+$(this).val()+"]").hide();
		//$("#kreisGrosseSelect option[value="+$(this).val()+"]").hide();
		//$("#colorFilter option[value="+$(this).val()+"]").hide();

		//$("#kreisGrosseSelect option[value="+$("#xAchse").val()+"]").hide();
		//$("#colorFilter option[value="+$("#xAchse").val()+"]").hide();
		});


$('#kreisGrosseSelect1').change(function(){
		$("#xAchse option").show();
		$("#yAchse option").show();
	    $("#colorFilter option").show();

		//$("#xAchse option[value="+$(this).val()+"]").hide();
		//$("#yAchse option[value="+$(this).val()+"]").hide();
		$("#colorFilter option[value="+$(this).val()+"]").hide();
		// $("#kreisGrosseSelect option[value="+$("#xAchse").val()+"]").hide();
		//$("#colorFilter option[value="+$("#xAchse").val()+"]").hide();
        //$("#colorFilter option[value="+$("#yAchse").val()+"]").hide();
		});

$('#colorFilter').change(function(){
		//$("#xAchse option").show();
		//$("#xAchse option[value="+$(this).val()+"]").hide();
		//$("#yAchse option[value="+$(this).val()+"]").hide();
//		$("#kreisGrosseSelect option[value="+$(this).val()+"]").hide();
		});

		// Achse select
		$('#achsen').change(function(){
			window.cleaner();
			xAchseOption = $("#xAchse option:selected");
			xAchseArray = [];
			yAchseArray = [];
			if 		(xAchseOption.val() ==="danceability" )	{ xAchse = xAchseOption.val();	//diese linie ist für die key zeigen
				for (var i = 0; i < parsedCSV.length; i++) {
					var help = parsedCSV[i]["danceability"];
					xAchseArray.push(((help*1000)/2) +100);
					console.log("xAchse array " + xAchseArray[i] +" in die position " + i);

				}

			console.log("xAchse variable " + xAchse);}		//diese linie ist für die key zeigen
			else if (xAchseOption.val() ==="energy")		{ xAchse = xAchseOption.val();

				for (var i = 0; i < parsedCSV.length; i++) {
					var help = parsedCSV[i]["energy"];
					xAchseArray.push(((help*1000)/2) +100);
					console.log("xAchse array " + xAchseArray[i] +" in die position " + i);
				}
			console.log("xAchse variable " + xAchse);}
			else if (xAchseOption.val() ==="tempo")			{ xAchse = xAchseOption.val();
				for (var i = 0; i < parsedCSV.length; i++) {
					//für tempo sollen wir sehen wie wir die daten von spotify bekommen. Wenn es ist tempo 120.000 man kann nicht *1000/2+100 machen
					var help = parsedCSV[i]["tempo"];
					console.log("help in tempo " + help );
					xAchseArray.push(help +100);
					console.log("xAchse array " + xAchseArray[i] +" in die position " + i);
				}

			console.log("xAchse variable " + xAchse);}
			else if (xAchseOption.val() ==="playcount")		{ xAchse = xAchseOption.val();  console.log("xAchse variable " + xAchse);}
			else if (xAchseOption.val() ==="loudness")		{ xAchse = xAchseOption.val();  console.log("xAchse variable " + xAchse);}
			else if (xAchseOption.val() ==="jahr")			{ xAchse = xAchseOption.val();  console.log("xAchse variable " + xAchse);}
			//else if	(xAchseOption.val() ==="key")			{ xAchse = xAchseOption.val();  console.log("xAchse variable " + xAchse);}
			//wort an die achsen schreiben
			var titleX = container.append("rect").attr("x",250).attr("y",505).attr("width",160).attr("height",45).attr("fill","white");
			var xText =  container.append("text").attr("x",300).attr("y",520).attr("id","xAchseText").text(xAchse);

			yAchseOption = $("#yAchse option:selected");
			if 		(yAchseOption.val() ==="danceability")	{ yAchse = yAchseOption.val();

			for (var i = 0; i < parsedCSV.length; i++) {
				var help = parsedCSV[i]["danceability"];
				yAchseArray.push((help*1000)/2);
				console.log("yAchse array " + yAchseArray[i] +" in die position " + i);

			}
			console.log("yAchse variable " + yAchse);}
			else if (yAchseOption.val() ==="energy")		{ yAchse = yAchseOption.val();

			for (var i = 0; i < parsedCSV.length; i++) {
				var help = parsedCSV[i]["energy"];
				yAchseArray.push((help*1000)/2);
				console.log("yAchse array " + yAchseArray[i] +" in die position " + i);

			}
			console.log("yAchse variable " + yAchse);}
			else if (yAchseOption.val() ==="tempo")			{ yAchse = yAchseOption.val();

			for (var i = 0; i < parsedCSV.length; i++) {
				var help = parsedCSV[i]["tempo"];
				console.log("help in tempo " + help );
				xAchseArray.push((help*1000)/2);
				console.log("xAchse array " + xAchseArray[i] +" in die position " + i);
			}

			console.log("yAchse variable " + yAchse);}
			else if (yAchseOption.val() ==="playcount")		{ yAchse = yAchseOption.val();	console.log("yAchse variable " + yAchse);}
			else if (yAchseOption.val() ==="loudness")		{ yAchse = yAchseOption.val();	console.log("yAchse variable " + yAchse);}
			else if (yAchseOption.val() ==="jahr")			{ yAchse = yAchseOption.val();	console.log("yAchse variable " + yAchse);}
			//else if	(yAchseOption.val() ==="key")			{ yAchse = yAchseOption.val();	console.log("yAchse variable " + yAchse);}


			//wort an die achsen schreiben
			var titleY = container.append("rect").attr("x",50).attr("y",170).attr("width",46).attr("height",160).attr("fill","white");
			var yText =  container.append("text").attr("x",220).attr("y",-70).attr("transform","rotate(90)").attr("id","yAchseText").text(yAchse);

			$("#kreisGrosse").trigger("change");
		});

		function kreisGrosseForType(type, circle, parsedCSV){
			if 		(type ==="danceability"){ kreisGrosse = type;	console.log("kreisGrosseOption variable " + kreisGrosse); kreisGrosseValue = parsedCSV*20; circle.attr('r', kreisGrosseValue);}
			else if (type ==="energy")		{ kreisGrosse = type;	console.log("kreisGrosseOption variable " + kreisGrosse); kreisGrosseValue = parsedCSV*20; circle.attr('r', kreisGrosseValue);}
			else if (type ==="tempo")		{ kreisGrosse = type;	console.log("kreisGrosseOption variable " + kreisGrosse); kreisGrosseValue = parsedCSV*20 / 100; circle.attr('r', kreisGrosseValue);}
			else if (type ==="playcount")	{ kreisGrosse = type;	console.log("kreisGrosseOption variable " + kreisGrosse); kreisGrosseValue = parsedCSV*20 / 10; circle.attr('r', kreisGrosseValue);}
			else if (type ==="loudness")	{ kreisGrosse = type;	console.log("kreisGrosseOption variable " + kreisGrosse); kreisGrosseValue = parsedCSV*20*(-1)/10; circle.attr('r', kreisGrosseValue);}
		};

		$("#kreisGrosse").change(function(){
			kreisGrosseOption = $("#kreisGrosseSelect option:selected");
			window.cleaner();
			var colorOption = $('#colorFilter option:selected');
			console.log(colorOption.val());
			for (var i = 0; i < parsedCSV.length; i++) {
					var key = parsedCSV[i][colorOption.val()];
					var circle = container.append('circle')
					.attr('cx', xAchseArray[i] )
					.attr('cy',yAchseArray[i]);
					if(colorOption.val() === 'genre'){
						circle.attr('fill', colorGenre(key));
					}else if(colorOption.val() === 'key'){
						circle.attr('fill',colorKey(key));
					}else if(colorOption.val() === 'tempo'){
						circle.attr('fill',colorTempo(tempo));
						}
					kreisGrosseForType(kreisGrosseOption.val(), circle, parsedCSV[i][kreisGrosseOption.val()]);
			}
		});

		function initGenreTable(){
		var array = [];
		var k = 0;
			for (var i = 0; i < parsedCSV.length; i++) {
				var genre = parsedCSV[i]["genre"];
				var saved = false;
				for(var j = 0; j < array.length; j++){
					if(genre === array[j]){
						saved = true;
						break;
					}
				}
				if(!saved){
					array[k++] = genre;
				}
			}
			var table = document.getElementById('tableColor');
			table.innerHTML = "";
			var tr;
			for(var i = 0; i < array.length; i++){
				if(i % 3 == 0 && i != 0){
					table.appendChild(tr);
				}
				if(i % 3 == 0){
					tr = document.createElement('tr');
				}
				var td = document.createElement('td');
				td.setAttribute('bgcolor', colorGenre(array[i]));
				var font = document.createElement('font');
				font.setAttribute('color', 'white');
				font.innerHTML = array[i];
				td.appendChild(font);
				tr.appendChild(td);
			}
		};




		//color select
		$("#colorDanceability").hide();
		$("#colorEnergy").hide();
		$("#colorTempo").hide();
		$("#colorGenre").hide();
		function colorTempo(tempo) {
            return "red";
		};




		//color select
		$("#colorDanceability").hide();
		$("#colorEnergy").hide();
		$("#colorTempo").hide();
		$("#colorGenre").hide();
		function colorGenre(genre) {
            if (genre ==="dance") {return "red"}
            else if (genre ==="deepHouse") {return "green"}
            else if (genre ==="house") {return "blue"}
            else if (genre ==="latinParty") {return "pink"}
            else if (genre ==="Deep House") {return "orange"}
            else if (genre ==="House") {return "yellow"}
            else if (genre ==="Lounge / Nu Jazz / House") {return "silver"}
            else if (genre ==="Dance") {return "purple"}
            else if (genre ==="TropicalHouse") {return "brown"}
            else{ return "black" };
		};

		$("#colorKey").hide();

		colorKey();


		$('#colorFilter').change(function(){
			window.cleaner();
			var colorOption = $('#colorFilter option:selected');
			if (colorOption.val()==="danceability"){
				$("#colorDanceability").toggle();
				$("#colorEnergy").hide();
				$("#colorTempo").hide();
				$("#colorGenre").hide();
				$("#colorKey").hide();
			}

			if (colorOption.val()==="leer"){

				$("#colorDanceability").hide();
 				$("#colorEnergy").toggle();
				$("#colorTempo").hide();
				$("#colorGenre").hide();
				$("#colorKey").hide();
			}

			if (colorOption.val()==="energy"){

				$("#colorDanceability").hide();
 				$("#colorEnergy").toggle();
				$("#colorTempo").hide();
				$("#colorGenre").hide();
				$("#colorKey").hide();
			}
			if (colorOption.val()==="tempo"){

				$("#colorDanceability").hide();
				$("#colorEnergy").hide();
 				$("#colorTempo").toggle();
				$("#colorGenre").hide();
				$("#colorKey").hide();



for (var i = 0; i < parsedCSV.length; i++) {

					// making the function for doing the color selection in key
					var tempo = parsedCSV[i]["tempo"];

					if((xAchse ==="energy" || xAchse ==="danceability") && (xAchse ==="energy" || xAchse ==="danceability")){
						var circle = container.append('circle')
						.attr('cx', ((parsedCSV[i][xAchse]*1000)/2)+100 )
						.attr('cy',((parsedCSV[i][yAchse]*1000)/2))
						.attr('fill',colorTempo(tempo));
						kreisGrosseForType(kreisGrosse, circle, parsedCSV[i][kreisGrosse]);
					}
					if (xAchse ==="tempo"){
						var circle = container.append('circle')
						.attr('cx', ((parsedCSV[i][xAchse]*1000)/400)+100 )
						.attr('cy',((parsedCSV[i][yAchse]*1000)/2))
						.attr('fill',colorTempo(tempo));
						kreisGrosseForType(kreisGrosse, circle, parsedCSV[i][kreisGrosse]);
					}
				}//end for


			}
			if (colorOption.val()==="genre"){

				$("#colorDanceability").hide();
				$("#colorEnergy").hide();
				$("#colorTempo").hide();
				$("#colorGenre").show();
				$("#colorKey").hide();
				initGenreTable();
				for (var i = 0; i < parsedCSV.length; i++) {

					// making the function for doing the color selection in key
					var genre = parsedCSV[i]["genre"];

					var circle = container.append("circle")
					.attr("cx", ((parsedCSV[i][xAchse]*1000)/2) +100)
					.attr("cy",((parsedCSV[i][yAchse]*1000)/2))
					.attr("fill",colorGenre(genre));
					kreisGrosseForType(kreisGrosse, circle, parsedCSV[i][kreisGrosse]);

				}


			}
			if (colorOption.val()==="key"){ //key is the color of the circles
				$("#colorDanceability").hide();
				$("#colorEnergy").hide();
				$("#colorTempo").hide();
				$("#colorGenre").hide();
				$("#colorKey").toggle();

				for (var i = 0; i < parsedCSV.length; i++) {

					// making the function for doing the color selection in key
					var key = parsedCSV[i]["key"];

					if((xAchse ==="energy" || xAchse ==="danceability") && (xAchse ==="energy" || xAchse ==="danceability")){
						var circle = container.append('circle')
						.attr('cx', ((parsedCSV[i][xAchse]*1000)/2)+100 )
						.attr('cy',((parsedCSV[i][yAchse]*1000)/2))
						.attr('fill',colorKey(key));
						kreisGrosseForType(kreisGrosse, circle, parsedCSV[i][kreisGrosse]);
					}
					if (xAchse ==="tempo"){
						var circle = container.append('circle')
						.attr('cx', ((parsedCSV[i][xAchse]*1000)/400)+100 )
						.attr('cy',((parsedCSV[i][yAchse]*1000)/2))
						.attr('fill',colorKey(key));
						kreisGrosseForType(kreisGrosse, circle, parsedCSV[i][kreisGrosse]);
					}
				}//end for
			}//end if option 5
		});//end color filter

   // sliders werden gebildet, fuer jede Attribut - eigene Slider
		buildSliders();
		buildSliders();


	});//end document ready

</script>


<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->
<!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! --><!-- end of script!!!!! -->


<div name="tags" style="width:1150;margin-left: 100px;border: 1px solid black; overflow: hidden;">
	<div name="tag-left" style="width:550px;float:left;border: 1px solid red;">
 
		<p id="achsen" style="margin-left:20%;overflow: hidden;">
		Achsen:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<text >x:</text>
			
			<select id="xAchse" name="x" >
			    <option value="leer" selected></option>
			    <option value="danceability">	Danceability	</option>
			    <option value="energy">			Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			    <option value="jahr">			Jahr		</option>
			</select>
			&nbsp;&nbsp;
			<text>y:</text>
		  	
		  	<select id="yAchse" name="y">
			    <option value="leer" selected></option>
			   	<option value="danceability">	Danceability	</option>
			    <option value="energy" >		Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			    <option value="jahr">			Jahr		</option>
		
		  	</select>
		 </p>
		
		<p id="kreisGrosse" style="margin-left:20% ;">
		 Kreis Größe:
		 
			<select id="kreisGrosseSelect" name="x" style="margin-left: 40px;">
			    <option value="leer" selected></option>
			    <option value="danceability">	Danceability</option>
			    <option value="energy">			Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			</select>
		</p>
		<p style="margin-left:20% ;">
		Color Filter
			<select id="colorFilter" style="margin-left: 47px;">
			    <option value="leer" selected></option>
			    <option value="danceability" >	Danceability</option>
		   		<option value="energy" >		Energy		</option>
		    	<option value="tempo" >			Tempo		</option>
		    	<option value="genre" >			Genre		</option>
		    	<option value="key" >			Key			</option>
		  	</select>
		</p>
		

		<div id="colorDanceability" style="margin-left:14% ;">
			<span class="slider">
				<input id="colorDanceability" type="slider" name="price" value="0.0;1.0" />
			</span>
			<div class="colors" style="margin-left:10% ;">
				<span style="background-color: rgba(153, 0, 0, .25)"></span>
				<span style="background-color: rgba(153, 0, 0, .4)"></span>
				<span style="background-color: rgba(153, 0, 0, .55)"></span>
				<span style="background-color: rgba(153, 0, 0, .7)"></span>
				<span style="background-color: rgba(153, 0, 0, .85)"></span>
				<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>
		</div>

		<div id="colorEnergy" style="margin-left:14% ;">		
			<span class="slider">
				<input type="slider" name="price" value="0.0;1.0" />
			</span>
			<div class="colors" style="margin-left:10% ;">
					<span style="background-color: rgba(153, 0, 0, .25)"></span>
					<span style="background-color: rgba(153, 0, 0, .4)"></span>
					<span style="background-color: rgba(153, 0, 0, .55)"></span>
					<span style="background-color: rgba(153, 0, 0, .7)"></span>
					<span style="background-color: rgba(153, 0, 0, .85)"></span>
					<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>	
		</div>
			
		<div id="colorTempo" style="margin-left:14% ;">
			<span class="slider">
				<input type="slider" name="price" value="50;200" />
			</span>
			<div class="colors" style="margin-left:10% ;">
				<span style="background-color: rgba(153, 0, 0, .25)"></span>
				<span style="background-color: rgba(153, 0, 0, .4)"></span>
				<span style="background-color: rgba(153, 0, 0, .55)"></span>
				<span style="background-color: rgba(153, 0, 0, .7)"></span>
				<span style="background-color: rgba(153, 0, 0, .85)"></span>
				<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>
		</div>	
		
				<div id="colorKey">
		
		  	<!-- Keyboard with the colors that we are going to use -->
			<br>
		
			<svg width="350" height="150" style=" margin-left: 20%;">
		
		  	<!-- notes (C,D,E,F,G,A,B)-->
				<rect x="0" 	y="0" 	width="50" height="150" 	style="fill:rgb(31,120,180);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="50" 	y="0" 	width="50" height="150"		style="fill:rgb(106,61,154);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="100" 	y="0" 	width="50" height="150" 	style="fill:rgb(177,89,40);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="150" 	y="0" 	width="50" height="150" 	style="fill:rgb(227,26,28);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="200" 	y="0" 	width="50" height="150" 	style="fill:rgb(255,127,0);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="250" 	y="0" 	width="50" height="150" 	style="fill:rgb(51,160,44);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="300" 	y="0" 	width="50" height="150" 	style="fill:rgb(255,255,153);	stroke-width:1;	stroke:rgb(255,255,255)"/>
		
			<!-- sharp notes (C# ,D# ,F#, G#, A#) -->
				<rect x="35" 	y="50" 	width="30" height="50" 		style="fill:rgb(166,206,227);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="85" 	y="50" 	width="30" height="50" 		style="fill:rgb(202,178,214);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="185" 	y="50" 	width="30" height="50" 		style="fill:rgb(251,154,153);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="235" 	y="50" 	width="30" height="50" 		style="fill:rgb(253,191,111);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="285" 	y="50" 	width="30" height="50" 		style="fill:rgb(178,223,138);	stroke-width:1;	stroke:rgb(255,255,255)"/>
		
				<rect x="0" y="0" width="350" height="50" style="fill=rgb(0,0,0); stroke-width:1;	stroke:rgb(255,255,255)"/>
			<!-- circles for notes of keys -->
				<circle cx="24" cy="125" r="14"  fill="white" />
				<circle cx="74" cy="125" r="14"  fill="white" />
				<circle cx="124" cy="125" r="14"  fill="white" />
				<circle cx="174" cy="125" r="14"  fill="white" />
				<circle cx="224" cy="125" r="14"  fill="white" />
				<circle cx="274" cy="125" r="14"  fill="white" />
				<circle cx="324" cy="125" r="14"  fill="white" />
			<!-- circles for notes of keys -->
				<text x="19" y="130" fill="black"> C </text>
				<text x="69" y="130" fill="black"> D </text>
				<text x="119" y="130" fill="black"> E </text>
				<text x="169" y="130" fill="black"> F </text>
				<text x="219" y="130" fill="black"> G </text>
				<text x="269" y="130" fill="black"> A </text>
				<text x="319" y="130" fill="black"> B </text>
		
				<circle cx="50" cy="75" r="12"  fill="white" />
				<circle cx="100" cy="75" r="12"  fill="white" />
				<circle cx="200" cy="75" r="12"  fill="white" />
				<circle cx="250" cy="75" r="12"  fill="white" />
				<circle cx="300" cy="75" r="12"  fill="white" />
		
				<text x="42" y="80" fill="black"> C# </text>
				<text x="92" y="80" fill="black"> D# </text>
				<text x="192" y="80" fill="black"> F# </text>
				<text x="242" y="80" fill="black"> G# </text>
				<text x="292" y="80" fill="black"> A# </text>
		
			</svg>
			<p style="text-align: center;">*Wenn die Metada "KEY" vom Lied nicht vorhanden ist es wird Schwarz gezeigt.</p>
		
		</div>
		
		<!-- Table for the color selection of genre -->
		<div id="colorGenre" style="margin-left:30% ;">
			<br>
			<table id="tableColor" bgcolor="silver" cellpadding="5" align="left" width="20%">	
			</table>
		</div>	

	</div><!-- end tag left -->
	
	<!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left -->
	<!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left -->
	<!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left -->
	<!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left -->
	<!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left --><!-- end tag left -->
	
	<div name="tag-right" style ="width:600px;border: 1px solid green;float:left;" >		
		<p id="achsen" style="margin-left:20%;">	
			<text >Achsen:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</text>
		
			<text >x:</text>
			
					
		  	<select id="xAchse2" name="x">
			    <option value="leer" selected></option>
			    <option value="danceability">	Danceability	</option>
			    <option value="energy">			Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			    <option value="jahr">			Jahr		</option>
		
			</select>
			&nbsp;&nbsp;
			<text>y:</text>
		  	<select id="yAchse2" name="y">
			    <option value="leer" selected></option>
			   	<option value="danceability">	Danceability	</option>
			    <option value="energy" >		Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			    <option value="jahr">			Jahr		</option>
		
		  	</select> 
			 
		 </p>
		 
		 <p id="kreisGrosse" style="margin-left:20% ;">
		 Kreis Größe:
		 
			<select id="kreisGrosseSelect2" name="x" style=" margin-left: 40px;">
			    <option value="leer" selected></option>
			    <option value="danceability">	Danceability</option>
			    <option value="energy">			Energy		</option>
			    <option value="tempo">			Tempo		</option>
			    <option value="playcount">		Playcount	</option>
			    <option value="loudness">		Loudness	</option>
			</select>
		</p>
		
		<p style="margin-left:20% ;">
		Color Filter:
			<select id="colorFilter2" style="margin-left: 43px;">
			    <option value="leer" selected></option>
			    <option value="danceability" >	Danceability</option>
		   		<option value="energy" >		Energy		</option>
		    	<option value="tempo" >			Tempo		</option>
		    	<option value="genre" >			Genre		</option>
		    	<option value="key" >			Key			</option>
		  	</select>
		</p>
		
		<div id="colorDanceability" style="margin-left:14% ;">
			<span class="slider">
				<input id="colorDanceability" type="slider" name="price" value="0.0;1.0" />
			</span>
			<div class="colors" style="margin-left:10% ;">
				<span style="background-color: rgba(153, 0, 0, .25)"></span>
				<span style="background-color: rgba(153, 0, 0, .4)"></span>
				<span style="background-color: rgba(153, 0, 0, .55)"></span>
				<span style="background-color: rgba(153, 0, 0, .7)"></span>
				<span style="background-color: rgba(153, 0, 0, .85)"></span>
				<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>
		</div>

		<div id="colorEnergy" style="margin-left:14% ;">		
			<span class="slider">
				<input type="slider" name="price" value="0.0;1.0" />
			</span>
			<div class="colors" style="margin-left:10% ;">
					<span style="background-color: rgba(153, 0, 0, .25)"></span>
					<span style="background-color: rgba(153, 0, 0, .4)"></span>
					<span style="background-color: rgba(153, 0, 0, .55)"></span>
					<span style="background-color: rgba(153, 0, 0, .7)"></span>
					<span style="background-color: rgba(153, 0, 0, .85)"></span>
					<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>	
		</div>
			
		<div id="colorTempo" style="margin-left:14% ;">
			<span class="slider">
				<input type="slider" name="price" value="50;200" />
			</span>
			<div class="colors" style="margin-left:10% ;">
				<span style="background-color: rgba(153, 0, 0, .25)"></span>
				<span style="background-color: rgba(153, 0, 0, .4)"></span>
				<span style="background-color: rgba(153, 0, 0, .55)"></span>
				<span style="background-color: rgba(153, 0, 0, .7)"></span>
				<span style="background-color: rgba(153, 0, 0, .85)"></span>
				<span style="background-color: rgba(153, 0, 0, 1)"></span>
			</div>
		</div>		

		<div id="colorKey">
		
		  	<!-- Keyboard with the colors that we are going to use -->
			<br>
		
			<svg width="350" height="150" style=" margin-left: 20%;">
		
		  	<!-- notes (C,D,E,F,G,A,B)-->
				<rect x="0" 	y="0" 	width="50" height="150" 	style="fill:rgb(31,120,180);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="50" 	y="0" 	width="50" height="150"		style="fill:rgb(106,61,154);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="100" 	y="0" 	width="50" height="150" 	style="fill:rgb(177,89,40);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="150" 	y="0" 	width="50" height="150" 	style="fill:rgb(227,26,28);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="200" 	y="0" 	width="50" height="150" 	style="fill:rgb(255,127,0);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="250" 	y="0" 	width="50" height="150" 	style="fill:rgb(51,160,44);		stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="300" 	y="0" 	width="50" height="150" 	style="fill:rgb(255,255,153);	stroke-width:1;	stroke:rgb(255,255,255)"/>
		
			<!-- sharp notes (C# ,D# ,F#, G#, A#) -->
				<rect x="35" 	y="50" 	width="30" height="50" 		style="fill:rgb(166,206,227);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="85" 	y="50" 	width="30" height="50" 		style="fill:rgb(202,178,214);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="185" 	y="50" 	width="30" height="50" 		style="fill:rgb(251,154,153);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="235" 	y="50" 	width="30" height="50" 		style="fill:rgb(253,191,111);	stroke-width:1;	stroke:rgb(255,255,255)"/>
				<rect x="285" 	y="50" 	width="30" height="50" 		style="fill:rgb(178,223,138);	stroke-width:1;	stroke:rgb(255,255,255)"/>
		
				<rect x="0" y="0" width="350" height="50" style="fill=rgb(0,0,0); stroke-width:1;	stroke:rgb(255,255,255)"/>
			<!-- circles for notes of keys -->
				<circle cx="24" cy="125" r="14"  fill="white" />
				<circle cx="74" cy="125" r="14"  fill="white" />
				<circle cx="124" cy="125" r="14"  fill="white" />
				<circle cx="174" cy="125" r="14"  fill="white" />
				<circle cx="224" cy="125" r="14"  fill="white" />
				<circle cx="274" cy="125" r="14"  fill="white" />
				<circle cx="324" cy="125" r="14"  fill="white" />
			<!-- circles for notes of keys -->
				<text x="19" y="130" fill="black"> C </text>
				<text x="69" y="130" fill="black"> D </text>
				<text x="119" y="130" fill="black"> E </text>
				<text x="169" y="130" fill="black"> F </text>
				<text x="219" y="130" fill="black"> G </text>
				<text x="269" y="130" fill="black"> A </text>
				<text x="319" y="130" fill="black"> B </text>
		
				<circle cx="50" cy="75" r="12"  fill="white" />
				<circle cx="100" cy="75" r="12"  fill="white" />
				<circle cx="200" cy="75" r="12"  fill="white" />
				<circle cx="250" cy="75" r="12"  fill="white" />
				<circle cx="300" cy="75" r="12"  fill="white" />
		
				<text x="42" y="80" fill="black"> C# </text>
				<text x="92" y="80" fill="black"> D# </text>
				<text x="192" y="80" fill="black"> F# </text>
				<text x="242" y="80" fill="black"> G# </text>
				<text x="292" y="80" fill="black"> A# </text>
		
			</svg>
			<p style="text-align: center;">*Wenn die Metada "KEY" vom Lied nicht vorhanden ist es wird Schwarz gezeigt.</p>
		
		</div>
		
		<!-- Table for the color selection of genre -->
		<div id="colorGenre" style="margin-left:30% ;">
			<br>
			<table id="tableColor" bgcolor="silver" cellpadding="5" align="left" width="20%">	
			</table>
		</div>
				
	</div>
</div><!-- end of div tags -->

	</body>
</html>